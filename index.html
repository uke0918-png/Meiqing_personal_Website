<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bronya Deng – Portfolio</title>

    <!-- Global site styles -->
    <link href="style.css" rel="stylesheet"/>

    <!-- Leaflet (map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- D3 (scatterplot & bar chart) -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- ==== ALL VISUALISATIONS ==== -->
    <script src="scatterplot.js" defer></script>
    <script src="script.js"      defer></script>
    <script src="three.js"       defer></script>

    <!-- NEW: the map script (inline – you can also put it in maps.js) -->
    <script src="maps.js" defer></script>

    <!-- ==== HAWAII-STYLE MAP STYLES (scoped to #map-my-journey) ==== -->
    <style>
        /* ---- Hawaii-theme background for the whole page (optional) ---- */
        body {background: linear-gradient(135deg, #ff9ff3, #f8b500, #48dbfb);}

        /* ---- Scoped to the map section only ---- */
        #map-my-journey,
        #map-my-journey * {background:transparent !important;}

        #map-my-journey .container{max-width:1200px;margin:0 auto;padding:20px;}
        #map-my-journey header{
            text-align:center;padding:40px 20px;background:rgba(255,255,255,.9);
            border-radius:16px;margin-bottom:30px;box-shadow:0 10px 30px rgba(0,0,0,.2);
        }
        #map-my-journey h1{
            margin:0 0 10px;font-size:2.8em;
            background:linear-gradient(90deg,#e056fd,#feca57,#48dbfb,#1dd1a1);
            -webkit-background-clip:text;background-clip:text;
            -webkit-text-fill-color:transparent;font-weight:800;
        }
        #map-my-journey .subtitle{font-size:1.2em;color:#6c5ce7;font-weight:600;}

        .map-container{
            position:relative;height:680px;background:#fff;border-radius:16px;
            overflow:hidden;box-shadow:0 12px 35px rgba(0,0,0,.2);margin-bottom:30px;
        }
        #journey-map{width:100%;height:100%;}

        .custom-legend{
            position:absolute;bottom:20px;left:20px;background:rgba(255,255,255,.95);
            padding:16px 20px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.15);
            font-size:14px;z-index:1000;backdrop-filter:blur(8px);
            border:1px solid rgba(0,0,0,.1);max-width:280px;
        }
        .legend-title{font-weight:700;margin-bottom:10px;color:#2d3436;font-size:16px;}
        .legend-item{display:flex;align-items:center;margin-bottom:8px;font-weight:500;}
        .legend-color{width:18px;height:18px;border-radius:50%;margin-right:10px;
                     box-shadow:0 1px 3px rgba(0,0,0,.3);}
        .highlight{font-weight:700;color:#6c5ce7;}

        .stats{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;margin:30px 0;}
        .stat-card{background:rgba(255,255,255,.9);padding:20px;border-radius:14px;
                   text-align:center;min-width:160px;box-shadow:0 8px 25px rgba(0,0,0,.15);
                   transition:transform .3s;}
        .stat-card:hover{transform:translateY(-5px);}
        .stat-number{font-size:2.4em;font-weight:800;
                     background:linear-gradient(90deg,#ff6b6b,#feca57);
                     -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .stat-label{font-size:1em;color:#636e72;margin-top:5px;font-weight:600;}

        .places-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
                     gap:16px;margin-top:20px;}
        .place-card{background:rgba(255,255,255,.95);padding:16px;border-radius:12px;
                    border-left:5px solid #6c5ce7;transition:all .3s;cursor:default;}
        .place-card:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,.15);
                          border-left-color:#a29bfe;}
        .place-name{font-weight:700;color:#2d3436;font-size:1.1em;}
        .place-type{font-size:.85em;color:#74b9ff;margin:4px 0;}
        .place-province{font-size:.8em;color:#636e72;}

        @media(max-width:768px){
            .map-container{height:500px;}
            #map-my-journey h1{font-size:2.2em;}
            .stats{flex-direction:column;align-items:center;}
            .places-grid{grid-template-columns:1fr;}
        }
    </style>
</head>
<body>

    <!-- ==================== HEADER ==================== -->
    <header>
        <nav>
            <ul id="main">
                <li><p>Bronya Deng</p></li>
                <a><button class="subpage" onclick="scrollToSection('about')">About Me</button></a>
                <a><button class="subpage" onclick="scrollToSection('gallery')">Gallery</button></a>
                <a><button id="cv" class="subpage">CV</button></a>
                <a class="subpage" href="cartoggram.html"> grid</a>
               
            </ul>
        </nav>

        <div class="flex-container">
            <img src="hudie.jpeg" alt="Bronya Deng Portrait"/>
            <div class="text-container">
                <h1>Welcome to my website!</h1>
                <p>I am a Bachelor of Art in Creative Media at the School of Creative Media.</p>
                <a class="intro_button" href="https://substack.com/@bronya3/note/c-164637482?r=6fpbe9&utm_medium=ios&utm_source=notes-share-action" target="_blank">
                    Follow me on Substack
                </a>
            </div>
        </div>

        <p style="text-align:center;max-width:800px;margin:2em auto;font-size:1.1em;">
            I focus on creating a unique artistic design style. My passion for art and culture has always been the driving force behind my pursuit of innovation.
            As an illustrator, I excel at blending quality with creativity, weaving intricate details and storytelling into my illustrations.
            My goal is to transform creativity and life into captivating artworks.
        </p>
    </header>

    <!-- ==================== ABOUT ==================== -->
    <section id="about">
        <h2>About Me</h2>
        <p>I blend traditional techniques with digital innovation to tell compelling visual stories.</p>
    </section>

    <!-- ==================== GALLERY ==================== -->
    <section id="gallery">
        <h2>Gallery</h2>
        <div class="box">
            <div>my work 1</div><div>my work 2</div><div>my work 3</div>
            <div>first line<br>second line</div>
        </div>
    </section>

    <!-- ==================== SCATTERPLOT ==================== -->
    <section id="scatterplot">
        <h1>Artistic Output Over Time (Scatterplot)</h1>
        <div id="vis-scatterplot"></div>
    </section>

    <!-- ==================== BAR CHART ==================== -->
    <section id="bar-chart-section">
        <h1>Artistic Passion Bar Chart</h1>
        <div id="bar-chart"></div>
    </section>

    <!-- ==================== TREE ==================== -->
    <section id="tree">
        <h1>Creative Journey Tree</h1>
        <div id="vis-three"></div>
    </section>

    <!-- ==================== MAP MY JOURNEY ==================== -->
    <section id="map-my-journey">
        <div class="container">
            <header>
                <h1>Map my Journey</h1>
                <p class="subtitle">Create a Dot Density Map of Places I've Visited</p>
            </header>

            <div class="map-container">
                <div id="journey-map"></div>

                <div class="custom-legend">
                    <div class="legend-title">Travel Type</div>
                    <div class="legend-item"><div class="legend-color" style="background:#e74c3c;"></div>家庭旅遊 (Family)</div>
                    <div class="legend-item"><div class="legend-color" style="background:#3498db;"></div>個人冒險 (Solo)</div>
                    <div class="legend-item"><div class="legend-color" style="background:#e67e22;"></div>上學/居住 (School/Lived)</div>
                    <div class="legend-item"><div class="legend-color" style="background:#9c27b0;"></div><span class="highlight">广州（家乡） / 香港（上学）</span></div>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card"><div class="stat-number" id="total-cities">0</div><div class="stat-label">到訪城市</div></div>
                <div class="stat-card"><div class="stat-number" id="total-provinces">0</div><div class="stat-label">覆蓋省份</div></div>
                <div class="stat-card"><div class="stat-number" id="total-visits">0</div><div class="stat-label">總到訪次數</div></div>
            </div>

            <div class="places-grid" id="places-grid"></div>
        </div>
    </section>

    <!-- ==================== SMOOTH SCROLL + CV ==================== -->
    <script>
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }
        document.getElementById('cv').addEventListener('click', () => {
            alert("Let me tell you more about myself!");
        });
    </script>

    <!-- ==== MAP LOGIC (you can also keep this in maps.js) ==== -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const cityData = [
            {name:"广州",province:"广州",lat:26.0745,lng:119.2965,visits:12,type:"hometown"},
            {name:"广州",province:"广州",lat:24.4798,lng:118.0819,visits:8,type:"hometown"},
            {name:"香港",province:"香港",lat:22.3193,lng:114.1694,visits:15,type:"school"},
            {name:"南京",province:"江苏",lat:32.0617,lng:118.7778,visits:3,type:"family"},
            {name:"苏州",province:"江苏",lat:31.2990,lng:120.6196,visits:4,type:"family"},
            {name:"哈尔滨",province:"黑龙江",lat:45.7575,lng:126.6333,visits:2,type:"family"},
            {name:"上海",province:"上海",lat:31.2304,lng:121.4737,visits:5,type:"adventure"},
            {name:"西安",province:"陕西",lat:34.2655,lng:108.9541,visits:2,type:"adventure"},
            {name:"桂林",province:"广西",lat:25.2736,lng:110.2902,visits:1,type:"adventure"},
            {name:"北京",province:"北京",lat:39.9042,lng:116.4074,visits:6,type:"lived"},
            {name:"深圳",province:"广东",lat:22.5431,lng:114.0579,visits:3,type:"lived"},
            {name:"深圳",province:"深圳",lat:33.6333,lng:116.9833,visits:1,type:"lived"}
        ];

        const map = L.map('journey-map').setView([35,105],4);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
            attribution:'&copy; OpenStreetMap contributors',maxZoom:18
        }).addTo(map);

        const dotGroup = L.layerGroup().addTo(map);
        const colorMap = {family:"#e74c3c",adventure:"#3498db",lived:"#e67e22",hometown:"#9c27b0",school:"#9c27b0"};
        const typeLabel = {family:"家庭旅遊",adventure:"個人冒險",lived:"上學/居住",hometown:"广州（家乡）",school:"香港（上学）"};

        let totalVisits=0; const provinces=new Set();
        cityData.forEach(c=>{
            totalVisits+=c.visits; provinces.add(c.province);
            const isHighlight = c.type==="hometown"||c.type==="school";
            const radius = isHighlight?Math.min(25,10+c.visits*3):Math.min(18,6+c.visits*2.5);
            const marker = L.circleMarker([c.lat,c.lng],{
                radius,fillColor:colorMap[c.type],color:isHighlight?"#6c5ce7":"#c0392b",
                weight:isHighlight?3:1.5,opacity:1,fillOpacity:isHighlight?0.9:Math.min(0.9,0.5+c.visits*0.08)
            }).bindPopup(`
                <strong style="color:${colorMap[c.type]};">${c.name}</strong><br>
                <span style="color:#636e72;">${c.province}</span><br>
                <div style="color:#74b9ff;font-weight:600;">${typeLabel[c.type]}</div>
                <strong>到訪 ${c.visits} 次</strong>
                ${isHighlight?'<br><span style="color:#6c5ce7;font-weight:700;">Special Place</span>':''}
            `,{offset:[0,-8]});

            marker.on('mouseover',()=>marker.setStyle({weight:4,color:'#f39c12',fillOpacity:1}));
            marker.on('mouseout',()=>marker.setStyle({
                weight:isHighlight?3:1.5,color:isHighlight?"#6c5ce7":"#c0392b",
                fillOpacity:isHighlight?0.9:Math.min(0.9,0.5+c.visits*0.08)
            }));
            dotGroup.addLayer(marker);
        });

        document.getElementById('total-cities').textContent=cityData.length;
        document.getElementById('total-provinces').textContent=provinces.size;
        document.getElementById('total-visits').textContent=totalVisits;

        const grid=document.getElementById('places-grid');
        cityData.sort((a,b)=>b.visits-a.visits).forEach(c=>{
            const isHighlight=c.type==="hometown"||c.type==="school";
            const card=document.createElement('div'); card.className='place-card';
            card.innerHTML=`
                <div class="place-name" style="color:${isHighlight?'#6c5ce7':'#2d3436'}">
                    ${c.name}${isHighlight?' Special':''}
                </div>
                <div class="place-type" style="color:${colorMap[c.type]}">${typeLabel[c.type]}</div>
                <div class="place-province">${c.province} · 到訪 ${c.visits} 次</div>
            `;
            grid.appendChild(card);
        });

        map.on('zoomend',()=>{
            dotGroup.eachLayer(l=>{
                const c=cityData.find(d=>Math.abs(d.lat-l.getLatLng().lat)<.001&&Math.abs(d.lng-l.getLatLng().lng)<.001);
                if(!c) return;
                const isHighlight=c.type==="hometown"||c.type==="school";
                const base=isHighlight?10+c.visits*3:6+c.visits*2.5;
                const scale=Math.pow(1.3,map.getZoom()-5);
                l.setRadius(Math.min(isHighlight?30:20,base*scale));
            });
        });

        if(window.innerWidth<768) alert("Tip: 雙指縮放地圖查看點密度");
    });
    </script>
</body>
</html>