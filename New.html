<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Art Journey Tree - Interactive & Zoomable</title>

  <!-- D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <!-- Google Fonts: Fredoka One (Hawaiian vibe) -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400;700&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

  <style>
    /* === GLOBAL STYLES === */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #87CEEB 0%, #98D8E8 40%, #F4A460 100%);
      color: #2C3E50;
      padding: 20px;
      line-height: 1.6;
    }

    h1 {
      text-align: center;
      font-family: 'Fredoka One', cursive;
      font-size: 2.8rem;
      color: #FF6B6B;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      margin-bottom: 10px;
    }

    .subtitle {
      text-align: center;
      font-size: 1.2rem;
      color: #2E8B57;
      margin-bottom: 30px;
      font-weight: 500;
    }

    /* === VIS CONTAINER === */
    #vis-three {
      max-width: 1400px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
      overflow: hidden;
    }

    #vis-three svg {
      display: block;
      margin: 0 auto;
      background: #fafafa;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      overflow: visible;
    }

    /* === TOOLTIP === */
    .tooltip {
      position: absolute;
      background: rgba(46, 139, 87, 0.95);
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: bold;
      pointer-events: none;
      opacity: 0;
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
      border: 2px solid #FFD700;
      max-width: 300px;
      line-height: 1.5;
      z-index: 1000;
      backdrop-filter: blur(4px);
    }

    /* === LINKS & NODES === */
    .link {
      fill: none;
      stroke: #aaa;
      stroke-width: 2.5;
      opacity: 0.6;
      transition: stroke 0.3s;
    }

    .node circle {
      fill: #1a73e8;
      stroke: #fff;
      stroke-width: 2;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .node text {
      font-family: 'Poppins', sans-serif;
      font-size: 13px;
      fill: #333;
      pointer-events: none;
    }

    .node:hover circle {
      r: 10;
      fill: #FF6B6B;
      stroke: #FFD700;
      stroke-width: 3;
    }

    /* === INSTRUCTIONS === */
    .instructions {
      text-align: center;
      margin-top: 25px;
      font-size: 1rem;
      color: #2E8B57;
      font-weight: 500;
    }

    .instructions kbd {
      background: #2E8B57;
      color: white;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.9em;
      font-family: monospace;
    }

    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      h1 { font-size: 2.2rem; }
      .subtitle { font-size: 1rem; }
      #vis-three { padding: 15px; }
    }
  </style>
</head>
<body>

  <h1>Art Journey Tree</h1>
  <p class="subtitle">Explore your creative path — zoom, pan, and discover!</p>

  <div id="vis-three"></div>

  <p class="instructions">
    <kbd>Scroll</kbd> to zoom • <kbd>Click & Drag</kbd> to pan • <kbd>Hover</kbd> nodes for details
  </p>

  <script>
    (function () {
      // ================================================
      // 1. DATA
      // ================================================
      const educationData = {
        "name": "Drawing",
        "children": [
          {
            "name": "Interests",
            "children": [
              { "name": "2018–2020: Local Art School - Beginner Drawing Classes" },
              { "name": "2021: Summer Workshop - Digital Illustration Techniques" },
              { "name": "2022–Present: Mentorship with Local Artist" }
            ]
          },
          {
            "name": "Projects",
            "children": [
              { "name": "Portrait Illustrations" },
              { "name": "Concept Art for Games" },
              { "name": "Personal Sketchbook Collections" }
            ]
          },
          {
            "name": "Favorites",
            "children": [
              { "name": "Anime Style" },
              { "name": "Realism" }
            ]
          },
          {
            "name": "Achievements",
            "children": [
              { "name": "Art Competition Entries" }
            ]
          },
          {
            "name": "Daily Practice",
            "children": [
              { "name": "1–2 hours daily" }
            ]
          }
        ]
      };

      // ================================================
      // 2. LAYOUT & DIMENSIONS
      // ================================================
      const margin = { top: 60, right: 300, bottom: 40, left: 80 };
      const treeLayout = d3.tree().nodeSize([70, 280]);
      const root = d3.hierarchy(educationData);
      treeLayout(root);

      const descendants = root.descendants();
      const maxDepth = root.height;
      const totalNodes = descendants.length;
      const minWidth = totalNodes * 280 + margin.left + margin.right;
      const minHeight = (maxDepth + 1) * 70 + margin.top + margin.bottom;

      const width = Math.min(minWidth, window.innerWidth * 0.9);
      const height = Math.min(minHeight, 1200);

      // ================================================
      // 3. SVG + ZOOM
      // ================================================
      const svg = d3.select("#vis-three")
        .append("svg")
        .attr("width", "100%")
        .attr("height", height + margin.top + margin.bottom)
        .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .style("background", "#fafafa");

      const g = svg.append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      const zoom = d3.zoom()
        .scaleExtent([0.3, 3])
        .on("zoom", (event) => g.attr("transform", event.transform));

      svg.call(zoom);

      // Fit tree on load
      const treeBounds = {
        x0: d3.min(descendants, d => d.x) - 50,
        x1: d3.max(descendants, d => d.x) + 50,
        y0: d3.min(descendants, d => d.y) - 50,
        y1: d3.max(descendants, d => d.y) + 50
      };

      const fullWidth = treeBounds.y1 - treeBounds.y0;
      const fullHeight = treeBounds.x1 - treeBounds.x0;
      const scale = Math.min(width / fullWidth, height / fullHeight) * 0.9;

      const initialTransform = d3.zoomIdentity
        .translate(width / 2, height / 2)
        .scale(scale)
        .translate(-(treeBounds.y0 + treeBounds.y1) / 2, -(treeBounds.x0 + treeBounds.x1) / 2);

      svg.call(zoom.transform, initialTransform);

      // ================================================
      // 4. LINKS
      // ================================================
      g.selectAll(".link")
        .data(root.links())
        .enter()
        .append("path")
        .attr("class", "link")
        .attr("d", d3.linkHorizontal()
          .x(d => d.y)
          .y(d => d.x));

      // ================================================
      // 5. NODES
      // ================================================
      const nodes = g.selectAll(".node")
        .data(descendants)
        .enter()
        .append("g")
        .attr("class", "node")
        .attr("transform", d => `translate(${d.y},${d.x})`)
        .style("cursor", "pointer");

      nodes.append("circle")
        .attr("r", 7);

      nodes.append("text")
        .attr("dy", "0.35em")
        .attr("x", d => d.children ? -18 : 18)
        .attr("text-anchor", d => d.children ? "end" : "start")
        .text(d => d.data.name)
        .call(wrap, 260);

      // ================================================
      // 6. TOOLTIP
      // ================================================
      const tooltip = d3.select("body").append("div")
        .attr("class", "tooltip")
        .style("opacity", 0);

      nodes.on("mouseover", function (event, d) {
        d3.select(this).select("circle")
          .transition().duration(150)
          .attr("r", 11)
          .attr("fill", "#FF6B6B");

        tooltip.transition().duration(200).style("opacity", 1);
        tooltip.html(`<strong>${d.data.name}</strong>`)
          .style("left", (event.pageX + 15) + "px")
          .style("top", (event.pageY - 15) + "px");
      })
      .on("mouseout", function () {
        d3.select(this).select("circle")
          .transition().duration(200)
          .attr("r", 7)
          .attr("fill", "#1a73e8");

        tooltip.transition().duration(400).style("opacity", 0);
      });

      // ================================================
      // 7. TITLE
      // ================================================
      svg.append("text")
        .attr("x", (width + margin.left + margin.right) / 2)
        .attr("y", 35)
        .attr("text-anchor", "middle")
        .style("font-size", "22px")
        .style("font-weight", "bold")
        .style("fill", "#2c3e50")
        .style("font-family", "'Fredoka One', cursive")
        .text("Your Art Journey");

      // ================================================
      // 8. TEXT WRAP
      // ================================================
      function wrap(text, width) {
        text.each(function () {
          const text = d3.select(this);
          const words = text.text().split(/\s+/).reverse();
          let word;
          let line = [];
          let lineNumber = 0;
          const lineHeight = 1.2;
          const y = text.attr("y") || 0;
          const dy = parseFloat(text.attr("dy"));
          let tspan = text.text(null)
            .append("tspan")
            .attr("x", text.attr("x"))
            .attr("y", y)
            .attr("dy", dy + "em");

          while (word = words.pop()) {
            line.push(word);
            tspan.text(line.join(" "));
            if (tspan.node().getComputedTextLength() > width) {
              line.pop();
              tspan.text(line.join(" "));
              line = [word];
              tspan = text.append("tspan")
                .attr("x", text.attr("x"))
                .attr("y", y)
                .attr("dy", ++lineNumber * lineHeight + dy + "em")
                .text(word);
            }
          }
        });
      }

      // ================================================
      // 9. RESIZE
      // ================================================
      window.addEventListener("resize", () => {
        const newWidth = Math.min(window.innerWidth * 0.9, minWidth);
        svg.attr("width", newWidth + margin.left + margin.right);
      });

    })();
  </script>
</body>
</html>